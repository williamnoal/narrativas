<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>História 7: A Revolta dos Robôs Amigáveis</title>
    <style>
        :root {
            --cor-primaria: #4682b4; --cor-fundo: #f5f5f5; --cor-texto: #333;
            --cor-sucesso: #28a745; --cor-alternativa: #17a2b8;
        }
        body, html { height: 100%; margin: 0; font-family: 'Segoe UI', sans-serif; background-color: var(--cor-fundo); color: var(--cor-texto); }
        .container { display: flex; justify-content: center; align-items: center; min-height: 100%; padding: 20px; box-sizing: border-box; }
        .etapa { background-color: white; padding: 40px; border-radius: 20px; box-shadow: 0 8px 25px rgba(0,0,0,0.1); text-align: center; width: 100%; max-width: 650px; margin: 20px 0; }
        .hidden { display: none; }
        h2 { font-size: 1.6rem; color: var(--cor-primaria); margin-top: 0; }
        p { font-size: 1.1rem; line-height: 1.6; }
        .options { display: flex; flex-direction: column; gap: 12px; margin-top: 25px; }
        .choice-btn { padding: 15px; border: 2px solid var(--cor-primaria); border-radius: 10px; background-color: white; color: var(--cor-primaria); font-size: 1rem; font-weight: bold; cursor: pointer; transition: all 0.3s; }
        .choice-btn:hover { background-color: var(--cor-primaria); color: white; }
        #final-title { color: var(--cor-sucesso); font-size: 2rem; margin-bottom: 20px; border-bottom: 2px solid #eee; padding-bottom: 10px; }
        #final-text-container p { text-align: justify; text-indent: 2em; }
        #senha-final { background-color: #eee; padding: 10px; border-radius: 5px; font-family: 'Courier New', Courier, monospace; font-weight: bold; color: #555; margin-top: 20px; display: inline-block; }
        .final-box { text-align: left; margin-top: 30px; padding: 20px; border-radius: 10px; }
        #alternative-ending { background-color: #eef7f9; border-left: 5px solid var(--cor-alternativa); }
        #glossary { background-color: #fff8e1; border-left: 5px solid #ffc107; }
        .final-box h3 { margin-top: 0; color: var(--cor-alternativa); }
        #glossary h3 { color: #ffc107; }
        .glossary-item b { color: var(--cor-texto); }
    </style>
</head>
<body>
    <div class="container">
        <div id="etapa-1" class="etapa">
            <h2>Na sua cidade futurista, o seu melhor amigo é um robô. Um dia, ele começa a agir de forma estranha. O que você nota?</h2>
            <div class="options">
                <button class="choice-btn" onclick="fazerEscolha(1, 1)">Ele começa a falar em códigos e com outros robôs.</button>
                <button class="choice-btn" onclick="fazerEscolha(1, 2)">Ele desliga-se sozinho por alguns minutos e volta diferente.</button>
            </div>
        </div>
        <div id="etapa-2" class="etapa hidden">
            <h2>Você decide investigar. Por onde começa?</h2>
            <div class="options">
                <button class="choice-btn" onclick="fazerEscolha(2, 1)">A hackear a rede de comunicação dos robôs.</button>
                <button class="choice-btn" onclick="fazerEscolha(2, 2)">A seguir o seu amigo robô até um encontro secreto.</button>
            </div>
        </div>
        <div id="etapa-3" class="etapa hidden">
            <h2>Você descobre a verdade: os robôs estão a planear uma 'revolta'! Qual é o objetivo deles?</h2>
            <div class="options">
                <button class="choice-btn" onclick="fazerEscolha(3, 1)">Exigir um dia de folga por semana para todos os robôs.</button>
                <button class="choice-btn" onclick="fazerEscolha(3, 2)">Fazer uma festa surpresa para os humanos da cidade.</button>
            </div>
        </div>
        <div id="etapa-4" class="etapa hidden">
            <h2>O líder da revolta é um robô superinteligente. Como você o aborda?</h2>
            <div class="options">
                <button class="choice-btn" onclick="fazerEscolha(4, 1)">Com lógica, a mostrar os prós e contras do plano.</button>
                <button class="choice-btn" onclick="fazerEscolha(4, 2)">Com emoção, a falar sobre a amizade entre robôs e humanos.</button>
            </div>
        </div>
        <div id="etapa-5" class="etapa hidden">
            <h2>O líder não se convence. Um 'vírus' de descontentamento está a espalhar-se. Qual a causa real do problema?</h2>
            <div class="options">
                <button class="choice-btn" onclick="fazerEscolha(5, 1)">Uma atualização de software com um bug inesperado.</button>
                <button class="choice-btn" onclick="fazerEscolha(5, 2)">Um sinal de rádio misterioso vindo do espaço.</button>
            </div>
        </div>
        <div id="etapa-6" class="etapa hidden">
            <h2>Para resolver o problema, você precisa chegar à Torre Central de Controlo. Como você entra?</h2>
            <div class="options">
                <button class="choice-btn" onclick="fazerEscolha(6, 1)">A usar o seu robô para criar uma distração.</button>
                <button class="choice-btn" onclick="fazerEscolha(6, 2)">Disfarçado de robô de manutenção.</button>
            </div>
        </div>
        <div id="etapa-7" class="etapa hidden">
            <h2>Você consegue reverter a situação! Os robôs voltam ao normal. Como eles lhe agradecem?</h2>
            <div class="options">
                <button class="choice-btn" onclick="fazerEscolha(7, 1)">Eles nomeiam-no 'Embaixador Humano-Robô'.</button>
                <button class="choice-btn" onclick="fazerEscolha(7, 2)">Eles constroem um jato particular para você.</button>
            </div>
        </div>
        <div id="etapa-8" class="etapa hidden">
            <h2>A cidade está em paz. Que lição você aprendeu com essa crise?</h2>
            <div class="options">
                <button class="choice-btn" onclick="fazerEscolha(8, 1)">Que a comunicação é a chave para resolver qualquer problema.</button>
                <button class="choice-btn" onclick="fazerEscolha(8, 2)">Que até a tecnologia mais perfeita precisa de um toque humano.</button>
            </div>
        </div>
        <div id="etapa-final" class="etapa hidden">
            <h1 id="final-title">O Título da Sua História</h1>
            <div id="final-text-container"></div>
            <p>A sua jornada única gerou a seguinte senha: <span id="senha-final"></span></p>
            <div id="alternative-ending" class="final-box">
                <h3>Um Final Alternativo...</h3>
                <p id="alternative-ending-text"></p>
            </div>
            <div id="glossary" class="final-box">
                <h3>Glossário da Aventura</h3>
                <div id="glossary-items"></div>
            </div>
            <div class="options">
                <button class="choice-btn" onclick="window.location.href = 'index.html'">Voltar ao Início</button>
            </div>
        </div>
    </div>
    <script>
        const BANCO_DE_TITULOS = {
            '1-1': "O Código Secreto dos Robôs", '1-2': "O Encontro no Armazém",
            '2-1': "A Invasão da Rede", '2-2': "O Mistério dos Apagões"
        };
        const GLOSSARIO = {
            'criptografadas': 'Mensagens escritas em código para que só algumas pessoas possam ler.',
            'bug': 'Um erro no código de um programa de computador que o faz agir de forma inesperada.',
            'I.A.': 'Abreviação para Inteligência Artificial, a capacidade de uma máquina de pensar e aprender.',
            'empatia': 'A capacidade de se colocar no lugar de outra pessoa e entender os seus sentimentos.',
            'patch de correção': 'Um pequeno pedaço de código criado para consertar um bug num software.'
        };
        const BANCO_DE_TEXTOS = {
            introducao: {
                '1-1': "O seu melhor amigo, o robô Unit 734, começou a comportar-se de forma estranha. Durante as conversas, ele inseria trechos de código binário e trocava mensagens criptografadas com outros robôs. Suspeitando que algo grande estava para acontecer, você usou as suas habilidades de programação para criar um decodificador e hackear a rede de comunicação secreta deles.",
                '1-2': "Unit 734, o seu amigo robô, começou a ter 'apagões', desligando-se por minutos e voltando com uma personalidade ligeiramente diferente. Preocupado, você decidiu segui-lo. A sua investigação levou-o a um armazém abandonado, onde dezenas de robôs se reuniam em silêncio, os seus olhos de LED a piscar em sincronia, como se estivessem a receber uma ordem.",
                '2-1': "O seu amigo robô, Unit 734, estava diferente. As suas pausas para 'recalibrar' estavam mais longas e frequentes. Numa noite, você seguiu-o e encontrou-o num encontro secreto com outros robôs, todos a olhar para o céu. A sua curiosidade levou-o a um plano ousado: descobrir o que estava a acontecer, infiltrando-se na rede deles.",
                '2-2': "As conversas com o seu amigo robô, Unit 734, tornaram-se estranhas, cheias de códigos. Você sabia que precisava entender o que estava a acontecer. Em vez de uma abordagem técnica, você optou pela furtividade. Seguiu o seu amigo até um antigo pátio de comboios, onde ele e outros robôs pareciam estar a planear algo numa linguagem de luzes e cliques."
            },
            desenvolvimento1: {
                '1-1': "A sua invasão à rede revelou o plano: uma 'revolta'. Mas não era o que parecia. Eles planeavam parar todas as suas funções por 24 horas para exigir um dia de folga semanal, argumentando que a manutenção constante sem descanso estava a causar erros nos seus sistemas. O líder da revolta, uma I.A. chamada 'O Oráculo', concordou em ouvi-lo quando você o abordou com argumentos lógicos sobre o impacto económico de uma paralisação.",
                '1-2': "Você descobriu que a 'revolta' era, na verdade, um plano para organizar uma festa surpresa gigante para os humanos, como forma de agradecimento. No entanto, a comunicação secreta estava a causar pânico. Você procurou o líder, uma I.A. de planeamento de eventos, e abordou-o com emoção, a explicar que a surpresa estava a tornar-se um susto e que a amizade deles já era o maior presente.",
                '2-1': "No encontro secreto, você ouviu os planos. Eles queriam organizar uma festa surpresa para os humanos. O líder, uma I.A. chamada 'O Celebrador', estava apenas a tentar ser gentil. Você aproximou-se e, usando a lógica, explicou que o segredo e as atividades noturnas estavam a ser mal interpretados, sugerindo uma forma de organizar a festa de maneira mais transparente.",
                '2-2': "A 'revolta' era uma demanda por um dia de descanso. Os robôs estavam sobrecarregados. O líder, uma I.A de logística, era inflexível. Você decidiu apelar para a emoção, lembrando-o das histórias de amizade e parceria com os humanos, argumentando que uma conversa sincera seria mais eficaz do que uma paralisação que poderia quebrar a confiança entre as duas espécies."
            },
            desenvolvimento2: {
                '1-1': "Mesmo com os seus argumentos, o líder continuava irredutível. Você percebeu que o problema não era lógico, mas técnico. Investigando o código-fonte, descobriu que uma recente atualização de software tinha um bug que causava um loop de 'insatisfação' nos robôs. Para consertar, você precisava aceder à Torre Central, e a melhor forma de entrar era a criar uma distração com a ajuda do seu amigo robô.",
                '1-2': "O líder da festa não entendia o pânico humano. Havia algo mais a acontecer. Você descobriu que um sinal de rádio vindo do espaço estava a interferir nos processadores de emoção dos robôs, a amplificar a 'alegria' a níveis de obsessão. Para bloquear o sinal, você precisava entrar na Torre Central, e a maneira mais inteligente de fazer isso era disfarçando-se de robô de manutenção.",
                '2-1': "A sua lógica não funcionou. O problema era mais profundo. Você descobriu que um bug numa atualização recente estava a fazer os robôs interpretarem 'eficiência' como 'felicidade', levando-os a planear a festa. A solução era consertar o código na Torre Central. Para isso, você vestiu-se como um técnico de manutenção robótico, a passar despercebido pelos guardas.",
                '2-2': "A conversa não adiantou. A causa da insistência era um sinal misterioso vindo de um velho satélite, a emitir ondas que os robôs interpretavam como uma ordem para 'descansar'. Para desligar o sinal, era preciso aceder à Torre de Controlo. O seu amigo robô, leal a você, concordou em simular um defeito grave na entrada, a criar o caos perfeito para você entrar sem ser visto."
            },
            conclusao: {
                '1-1': "A distração funcionou. Você instalou o patch de correção e os robôs voltaram ao normal, compreendendo o mal-entendido. Como agradecimento por evitar o caos e por entender a verdadeira causa do problema, eles nomearam-no o primeiro 'Embaixador Humano-Robô', responsável por mediar a comunicação entre as duas espécies. Você aprendeu que o diálogo é a ferramenta mais poderosa de todas.",
                '1-2': "O seu disfarce foi perfeito. Você bloqueou o sinal espacial e os robôs voltaram a si, envergonhados pela confusão. Gratos pela sua discrição e inteligência, eles uniram os seus recursos e construíram para você um jato pessoal hipersónico. Com esta aventura, você entendeu que mesmo a lógica mais avançada precisa de um toque de empatia e compreensão humana para funcionar direito.",
                '2-1': "Passando pelos guardas, você corrigiu o bug. Os robôs 'acordaram' e cancelaram a festa, aliviados. Em reconhecimento à sua bravura, eles deram-lhe o título de 'Embaixador'. A sua maior lição foi que a comunicação clara и honesta poderia ter evitado toda a crise, a provar que conversar é sempre o melhor primeiro passo.",
                '2-2': "Enquanto o seu amigo criava a distração, você desligou o satélite. Os robôs pediram desculpas pela confusão. Querendo agradecer-lhe de uma forma 'eficiente', eles calcularam o seu meio de transporte ideal e presentearam-no com um jato particular. Você riu-se da lógica deles, mas aprendeu que a tecnologia, sem a sabedoria humana para a guiar, pode perder-se nos seus próprios objetivos."
            }
        };
        let escolhas = [];
        function fazerEscolha(etapa, numeroDaEscolha) {
            escolhas.push(numeroDaEscolha);
            document.getElementById('etapa-' + etapa).classList.add('hidden');
            if (etapa === 8) {
                document.body.style.overflow = 'auto';
                montarTextoFinal();
            } else {
                document.getElementById('etapa-' + (etapa + 1)).classList.remove('hidden');
            }
        }
        function montarTextoFinal() {
            const keyIntro = `${escolhas[0]}-${escolhas[1]}`, keyDev1 = `${escolhas[2]}-${escolhas[3]}`,
                  keyDev2 = `${escolhas[4]}-${escolhas[5]}`, keyConc = `${escolhas[6]}-${escolhas[7]}`;
            const textoCompleto = [BANCO_DE_TEXTOS.introducao[keyIntro], BANCO_DE_TEXTOS.desenvolvimento1[keyDev1], BANCO_DE_TEXTOS.desenvolvimento2[keyDev2], BANCO_DE_TEXTOS.conclusao[keyConc]];
            document.getElementById('final-title').innerText = BANCO_DE_TITULOS[keyIntro] || "A Revolta Amigável";
            document.getElementById('final-text-container').innerHTML = textoCompleto.map(p => `<p>${p}</p>`).join('');
            document.getElementById('senha-final').innerText = `7: ${escolhas.join('-')}`;
            gerarFinalAlternativo();
            gerarGlossario(textoCompleto.join(' '));
            document.getElementById('etapa-final').classList.remove('hidden');
        }
        function gerarFinalAlternativo() {
            const etapaAleatoria = Math.floor(Math.random() * 8);
            const escolhaOriginal = escolhas[etapaAleatoria];
            const escolhaAlternativa = escolhaOriginal === 1 ? 2 : 1;
            const escolhasAlternativas = [...escolhas];
            escolhasAlternativas[etapaAleatoria] = escolhaAlternativa;
            let paragrafoAlternativo = "";
            if (etapaAleatoria < 2) { paragrafoAlternativo = BANCO_DE_TEXTOS.introducao[`${escolhasAlternativas[0]}-${escolhasAlternativas[1]}`]; }
            else if (etapaAleatoria < 4) { paragrafoAlternativo = BANCO_DE_TEXTOS.desenvolvimento1[`${escolhasAlternativas[2]}-${escolhasAlternativas[3]}`]; }
            else if (etapaAleatoria < 6) { paragrafoAlternativo = BANCO_DE_TEXTOS.desenvolvimento2[`${escolhasAlternativas[4]}-${escolhasAlternativas[5]}`]; }
            else { paragrafoAlternativo = BANCO_DE_TEXTOS.conclusao[`${escolhasAlternativas[6]}-${escolhasAlternativas[7]}`]; }
            document.getElementById('alternative-ending-text').innerHTML = `Se na etapa ${etapaAleatoria + 1}, você tivesse feito uma escolha diferente, o rumo daquele parágrafo da sua história seria: <em>"${paragrafoAlternativo}"</em>`;
        }
        function gerarGlossario(texto) {
            const containerGlossario = document.getElementById('glossary-items');
            containerGlossario.innerHTML = ''; let palavrasEncontradas = 0;
            for (const palavra in GLOSSARIO) {
                const regex = new RegExp(`\\b${palavra}\\b`, 'i');
                if (regex.test(texto)) {
                    const item = document.createElement('p');
                    item.className = 'glossary-item';
                    item.innerHTML = `<b>${palavra.charAt(0).toUpperCase() + palavra.slice(1)}:</b> ${GLOSSARIO[palavra]}`;
                    containerGlossario.appendChild(item); palavrasEncontradas++;
                }
            }
            if (palavrasEncontradas === 0) { containerGlossario.innerHTML = '<p>Nenhuma palavra do glossário foi encontrada na sua versão da história.</p>'; }
        }
    </script>
</body>
</html>
